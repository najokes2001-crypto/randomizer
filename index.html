<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–æ—Å—Ç—è–º–∏</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .guest-list {
            margin: 20px 0;
        }

        .guest-item {
            padding: 10px;
            border: 1px solid #ddd;
            margin: 5px 0;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .replace-btn {
            background-color: #ff6b6b;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        .replace-btn:hover {
            background-color: #ff5252;
        }

        .filter-section {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f5f5f5;
            border-radius: 5px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            width: 300px;
            margin: 100px auto;
        }
    </style>
</head>
<body>
    <h1>–°–ø–∏—Å–æ–∫ –≥–æ—Å—Ç–µ–π</h1>

    <div class="filter-section">
        <label>
            <input type="checkbox" id="coupleFilter"> –ò—Å–∫–ª—é—á–∏—Ç—å –∂–µ–Ω–∏—Ö–∞ –∏ –Ω–µ–≤–µ—Å—Ç—É
        </label>
    </div>

    <div id="guestList" class="guest-list">
        <!-- –°–ø–∏—Å–æ–∫ –≥–æ—Å—Ç–µ–π –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∑–¥–µ—Å—å -->
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∑–∞–º–µ–Ω—ã -->
    <div id="replaceModal" class="modal">
        <div class="modal-content">
            <h3>–ó–∞–º–µ–Ω–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞</h3>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –¥–ª—è –∑–∞–º–µ–Ω—ã:</p>
            <select id="newParticipantSelect"></select>
            <div style="margin-top: 20px;">
                <button onclick="confirmReplace()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                <button onclick="closeModal()" style="background-color: #ccc;">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <script>
        // –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö
        const guestData = [
            { id: 1, name: "–ê–Ω–Ω–∞", status: "–ì–æ—Å—Ç—å" },
            { id: 2, name: "–ò–≤–∞–Ω", status: "–ì–æ—Å—Ç—å" },
            { id: 3, name: "–ú–∞—Ä–∏—è", status: "–ù–µ–≤–µ—Å—Ç–∞ üë∞" },
            { id: 4, name: "–ü–µ—Ç—Ä", status: "–ñ–µ–Ω–∏—Ö ü§µ" },
            { id: 5, name: "–û–ª—å–≥–∞", status: "–ì–æ—Å—Ç—å" }
        ];

        const availableParticipants = [
            { id: 6, name: "–°–µ—Ä–≥–µ–π", status: "–†–µ–∑–µ—Ä–≤" },
            { id: 7, name: "–ï–ª–µ–Ω–∞", status: "–†–µ–∑–µ—Ä–≤" },
            { id: 8, name: "–î–º–∏—Ç—Ä–∏–π", status: "–†–µ–∑–µ—Ä–≤" }
        ];

        let currentGuestIdToReplace = null;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            renderGuestList();
            document.getElementById('coupleFilter').addEventListener('change', renderGuestList);
        }

        // –†–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫–∞ –≥–æ—Å—Ç–µ–π
        function renderGuestList() {
            const guestList = document.getElementById('guestList');
            const coupleFilter = document.getElementById('coupleFilter').checked;
            
            guestList.innerHTML = '';

            guestData.forEach(guest => {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –∏—Å–∫–ª—é—á–∞—Ç—å –∂–µ–Ω–∏—Ö–∞ –∏ –Ω–µ–≤–µ—Å—Ç—É
                if (coupleFilter && (guest.status === "–ù–µ–≤–µ—Å—Ç–∞ üë∞" || guest.status === "–ñ–µ–Ω–∏—Ö ü§µ")) {
                    return; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∏—Ç–µ—Ä–∞—Ü–∏—é
                }

                const guestItem = document.createElement('div');
                guestItem.className = 'guest-item';
                guestItem.innerHTML = `
                    <div>
                        <strong>${guest.name}</strong> - ${guest.status}
                    </div>
                `;

                // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –∑–∞–º–µ–Ω—ã –¥–ª—è –≤—Å–µ—Ö –∫—Ä–æ–º–µ –∂–µ–Ω–∏—Ö–∞ –∏ –Ω–µ–≤–µ—Å—Ç—ã
                if (guest.status !== "–ù–µ–≤–µ—Å—Ç–∞ üë∞" && guest.status !== "–ñ–µ–Ω–∏—Ö ü§µ") {
                    const replaceButton = document.createElement('button');
                    replaceButton.textContent = '–£—á–∞—Å—Ç–Ω–∏–∫ –Ω–µ —Ö–æ—á–µ—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å - –∑–∞–º–µ–Ω–∏—Ç—å';
                    replaceButton.className = 'replace-btn';
                    replaceButton.onclick = () => openReplaceModal(guest.id);
                    guestItem.appendChild(replaceButton);
                }

                guestList.appendChild(guestItem);
            });
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–ª—è –∑–∞–º–µ–Ω—ã
        function openReplaceModal(guestId) {
            currentGuestIdToReplace = guestId;
            const select = document.getElementById('newParticipantSelect');
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º select –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
            select.innerHTML = '';
            availableParticipants.forEach(participant => {
                const option = document.createElement('option');
                option.value = participant.id;
                option.textContent = `${participant.name} (${participant.status})`;
                select.appendChild(option);
            });

            document.getElementById('replaceModal').style.display = 'block';
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        function closeModal() {
            document.getElementById('replaceModal').style.display = 'none';
            currentGuestIdToReplace = null;
        }

        // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–º–µ–Ω—ã
        function confirmReplace() {
            if (!currentGuestIdToReplace) return;

            const select = document.getElementById('newParticipantSelect');
            const selectedParticipantId = parseInt(select.value);
            const selectedParticipant = availableParticipants.find(p => p.id === selectedParticipantId);

            if (selectedParticipant) {
                // –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å –≥–æ—Å—Ç—è –¥–ª—è –∑–∞–º–µ–Ω—ã
                const guestIndex = guestData.findIndex(g => g.id === currentGuestIdToReplace);
                
                if (guestIndex !== -1) {
                    // –ó–∞–º–µ–Ω—è–µ–º –≥–æ—Å—Ç—è
                    guestData[guestIndex] = {
                        ...selectedParticipant,
                        status: "–ì–æ—Å—Ç—å" // –ú–µ–Ω—è–µ–º —Å—Ç–∞—Ç—É—Å –Ω–∞ –æ–±—ã—á–Ω–æ–≥–æ –≥–æ—Å—Ç—è
                    };

                    // –£–¥–∞–ª—è–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
                    availableParticipants.splice(availableParticipants.findIndex(p => p.id === selectedParticipantId), 1);

                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫
                    renderGuestList();
                    closeModal();
                    
                    alert('–£—á–∞—Å—Ç–Ω–∏–∫ —É—Å–ø–µ—à–Ω–æ –∑–∞–º–µ–Ω–µ–Ω!');
                }
            }
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        window.onclick = function(event) {
            const modal = document.getElementById('replaceModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
