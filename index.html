// Функция для создания конфетти
function createConfetti() {
    const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
    const container = $('.main');
    
    for (let i = 0; i < 30; i++) {
        const confetti = $('<div class="confetti"></div>');
        confetti.css({
            left: Math.random() * 100 + '%',
            background: colors[Math.floor(Math.random() * colors.length)],
            transform: 'rotate(' + (Math.random() * 360) + 'deg)'
        });
        
        container.append(confetti);
        
        setTimeout(() => {
            confetti.remove();
        }, 5000);
    }
}

// Улучшенная функция для отображения результатов
function displayResults(selectedGuests) {
    var grid = $("#participants-grid");
    grid.empty();
    
    selectedGuests.forEach(function(guestIndex) {
        var card = $('<div class="participant-card"></div>');
        
        // Добавляем бейдж с количеством участий, если больше 1
        if (participationCount[guestIndex] > 1) {
            card.append('<div class="reset-badge">' + participationCount[guestIndex] + '</div>');
        }
        
        // Создаем контейнер для изображения
        var imgContainer = $('<div class="participant-image-container"></div>');
        
        // Создаем изображение
        var img = new Image();
        img.className = "participant-image";
        img.alt = guestNames[guestIndex];
        img.onerror = function() {
            // Используем placeholder, если изображение не загружается
            this.src = "https://via.placeholder.com/210x280/ffeb3b/000?text=" + encodeURIComponent(guestNames[guestIndex]);
            this.style.width = "auto";
            this.style.height = "100%";
        };
        img.onload = function() {
            this.style.width = "auto";
            this.style.height = "100%";
        };
        
        // Пытаемся загрузить изображение
        img.src = images[guestIndex];
        
        // Добавляем изображение в контейнер
        imgContainer.append(img);
        
        // Создаем информацию об участнике
        var info = $('<div class="participant-info"></div>');
        info.append('<div class="participant-name">' + guestNames[guestIndex] + '</div>');
        info.append('<div class="participant-status">' + guestStatuses[guestIndex] + '</div>');
        
        // Добавляем информацию о количестве участий
        var timesText = "Участвует впервые";
        if (participationCount[guestIndex] > 1) {
            timesText = "Участвует " + participationCount[guestIndex] + " раз";
        }
        info.append('<div class="participant-times">' + timesText + '</div>');
        
        // Добавляем контейнер с изображением и информацию в карточку
        card.append(imgContainer);
        card.append(info);
        
        // Добавляем карточку в сетку
        grid.append(card);
    });
}
